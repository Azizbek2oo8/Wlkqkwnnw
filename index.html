<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Mening Mini App'im</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.tgads.space/assets/js/tg-ads-co-widget.min.js"
    ></script>
    <style>
      /* Tugma uchun oddiy stil */
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: sans-serif;
        background-color: #f0f0f0;
      }
      #reklamaButton {
        padding: 15px 30px;
        font-size: 18px;
        cursor: pointer;
        border: none;
        border-radius: 8px;
        background-color: #007bff;
        color: white;
      }
    </style>
  </head>
  <body>
    <button id="reklamaButton">Reklamani Ko'rish</button>

    <script type="text/javascript">
      // Hujjat to'liq yuklangandan so'ng ishga tushadi
      document.addEventListener('DOMContentLoaded', () => {
        
        // 1. Adexium Widget'ni sozlash va ishga tushirish
        const adexiumAds = new AdexiumWidget({
          // SIZNING noyob widget ID'ingiz:
          wid: '2cfcb775-b0ce-42b1-b28f-ce29509bc0f9', 
          
          // Reklama formati: 'interstitial' - to'liq ekranli reklama
          adFormat: 'interstitial',
          
          // Dasturni test qilish uchun. Saytni ishga tushirganda ushbu qatorni o'chiring!
          // Bu yoqilgan bo'lsa, har doim test reklamasi keladi.
          debug: true 
        });

        // 2. HTML dagi tugmani topish
        const reklamaTugmasi = document.getElementById('reklamaButton');
        
        // 3. Tugmaga bosish hodisasini qo'shish
        reklamaTugmasi.onclick = () => {
          console.log("Reklama uchun so'rov yuborilmoqda...");
          // Adexium'dan reklama so'rash
          adexiumAds.requestAd('interstitial');
        };

        // 4. Hodisalarni (events) kuzatish

        // Reklama muvaffaqiyatli qabul qilinganda ishlaydi
        adexiumAds.on('adReceived', (ad) => {
          console.log("Reklama qabul qilindi:", ad);
          // Qabul qilingan reklamani ekranga chiqarish
          adexiumAds.displayAd(ad); 
        });

        // Agar mos reklama topilmasa ishlaydi
        adexiumAds.on('noAdFound', () => {
          console.log('Afsuski, hozircha mos reklama topilmadi.');
          // Bu yerda foydalanuvchiga xabar berishingiz mumkin
          alert("Hozircha reklama mavjud emas. Birozdan so'ng urinib ko'ring.");
        });

        // Reklama foydalanuvchi tomonidan yopilganda ishlaydi
        adexiumAds.on('adClosed', () => {
          console.log('Reklama yopildi.');
        });

        // Reklama ko'rsatilganda ishlaydi
         adexiumAds.on('adDisplayed', () => {
            console.log('Reklama ekranda ko\'rsatildi.');
        });
      });
    </script>
  </body>
</html>
